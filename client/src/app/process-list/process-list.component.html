<div  class="clearfix" >
  <nav aria-label="breadcrumb" >
    <ol class="breadcrumb">
      <li class="breadcrumb-item active" aria-current="page"> Home </li>
    </ol>
  </nav>
</div>
<div >
  <h1 class="float-left">Process Segments List</h1>
  <div class="float-right">
      <i class="fas fa-search"></i>&nbsp;
      <input type="search" name="search" style="margin-top: 10px" placeholder="process name" [(ngModel)]="searchText">
      <button (click)="populateProcessSegmentList();" class="btn btn-primary btn-sm" style="margin-top: -5px;"> Search </button>
  </div>
</div>

<!-- Process Segments List -->
<table class="table table-striped table-bordered">
  <thead>
    <tr>
      <th scope="col">Name (VAR Process name)</th>
      <th scope="col">Level of sub processes</th>
      <th scope="col">Sub 1</th>
      <th scope="col">Sub 2</th>
      <th scope="col">Sub 3</th>
      <th scope="col">Actions</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let process of processSegmentList">
      <td>
        <a
          *ngIf="process?.editRoute; else noEdit"
          routerLink="{{ process?.editRoute }}"
          (click)="saveAnalysisData(process.rawElementReference, process)"
        >
          {{ process?.name }}
        </a>
        <ng-template #noEdit> {{ process?.name }} </ng-template>
      </td>
      <td> {{ process?.sublevels }} </td>
      <td> {{ process?.sub1 }} </td>
      <td> {{ process?.sub2 }} </td>
      <td> {{ process?.sub3 }} </td>
      <td> <a routerLink="{{ process?.route }}" (click)="saveAnalysisData(process.rawElementReference, process)"> {{ process?.actions }} </a> </td>
    </tr>
  </tbody>
</table>

<ng-template [ngIf]="syncingWithVAR">
  <mat-progress-bar mode="indeterminate"></mat-progress-bar>
  <br>
</ng-template>

<!-- Select & Pagination UI -->
<div class="row">
  <div class="col-md-5 col-sm-12">
    <select name="numberOfItems" [(ngModel)]="numberOfItems" (ngModelChange)="page=0; populateProcessSegmentList();">
      <option value="3">3 items per page</option>
      <option value="5">5 items per page</option>
      <option value="6">6 items per page</option>
      <option value="10">10 items per page</option>
      <option value="12">12 items per page</option>
    </select> &nbsp;
    <select name="pageRange" [(ngModel)]="page" [ngModel]="lastPage" (ngModelChange)="populateProcessSegmentList();">
      <option *ngFor="let page of pageIterable">Page {{ +page + 1 }} of {{ +lastPage + 1 }}</option>
    </select>
  </div>
  <div class="col-md-7 col-sm-12">
    <nav aria-label="Page navigation">
      <ul class="pagination float-right">
        <li class="page-item"><a class="page-link" (click)="page=0; populateProcessSegmentList();">First</a></li>
        <li class="page-item"><a class="page-link" (click)="previousPage(); populateProcessSegmentList();">Previous</a></li>
        <li class="page-item"><a class="page-link" (click)="nextPage(); populateProcessSegmentList();">Next</a></li>
        <li class="page-item"><a class="page-link" (click)="page=lastPage; populateProcessSegmentList();">Last</a></li>
      </ul>
    </nav>
  </div>
</div>


